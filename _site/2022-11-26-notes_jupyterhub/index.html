<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png">
<link rel="manifest" href="/assets/img/site.webmanifest">
<link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/img/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  <title>Notes on Jupyterhub server setup</title>

  
  <meta name="author" content="Yuanpeng Zhang">
  

  <meta name="description" content="Tips &amp; Tricks">

  

  

  <link rel="alternate" type="application/rss+xml" title="Yuanpeng's Blog" href="http://localhost:4001/feed.xml">

  

  

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-44PBCNZ80G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-44PBCNZ80G');
</script>

  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="Yuanpeng's Blog">
  <meta property="og:title" content="Notes on Jupyterhub server setup">
  <meta property="og:description" content="Tips &amp; Tricks">

  
  <meta property="og:image" content="http://localhost:4001/assets/img/avatar-icon.png">
  

  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Yuanpeng Zhang">
  <meta property="og:article:published_time" content="2022-11-26T00:00:00+00:00">
  <meta property="og:url" content="http://localhost:4001/2022-11-26-notes_jupyterhub/">
  <link rel="canonical" href="http://localhost:4001/2022-11-26-notes_jupyterhub/">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@">
  <meta name="twitter:creator" content="@">

  <meta property="twitter:title" content="Notes on Jupyterhub server setup">
  <meta property="twitter:description" content="Tips &amp; Tricks">

  
  <meta name="twitter:image" content="http://localhost:4001/assets/img/avatar-icon.png">
  

  


  

  

<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script async='async' src='https://www.gstatic.com/external_hosted/clipboardjs/clipboard.min.js'></script>
<script src='https://unpkg.com/sweetalert@2.1.2/dist/sweetalert.min.js'></script>
<script language='JavaScript'>
  function copytoclipboard(containerid){
    if (document.selection) {
      var range = document.body.createTextRange();
      range.moveToElementText(document.getElementById(containerid));
      range.select().createTextRange();
      document.execCommand("copy");
    } else if (window.getSelection) {
      var range = document.createRange();
      range.selectNode(document.getElementById(containerid));
      var selection = window.getSelection() // get Selection object from currently user selected text
      selection.removeAllRanges() // unselect any user selected text (if any)
      selection.addRange(range) // add range to Selection object to select it
      document.execCommand("copy");
      //alert("Codes snippet copied to clipboard!")
      swal({
      title: "",
      text: "Codes snippet copied to clipboard!",
      icon: "success",
      });
    }
  }
</script>
</head>

<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand navbar-brand-logo" href="http://localhost:4001/"><img alt="Yuanpeng's Blog Logo" src="/assets/img/home.png"/></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
              <a class="nav-link" href="/search">üîçSearch</a></li>
          <li class="nav-item">
              <a class="nav-link" href="/about">About</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Posts</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="/all_posts">All posts</a>
                    <a class="dropdown-item" href="/archive">Archive</a>
                    <a class="dropdown-item" href="/tags">Tags</a>
            </div>
          </li>
        
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Research</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="/nav_pages/publications">Publications</a>
                    <a class="dropdown-item" href="/nav_pages/lnotes">Learning Notes</a>
            </div>
          </li>
        
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More Links</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown"><a target="_blank" class="dropdown-item" href="https://www.ornl.gov/staff-profile/yuanpeng-zhang">ORNL Profile</a>
								  <a target="_blank" class="dropdown-item" href="https://scholar.google.com/citations?user=NgqIgO0AAAAJ&hl=en">Google Scholar</a>
								  <a target="_blank" class="dropdown-item" href="https://orcid.org/0000-0003-4224-3361">ORCID</a>
								  <a target="_blank" class="dropdown-item" href="https://rmcprofile.pages.ornl.gov/">RMCProfile</a>
								  <a target="_blank" class="dropdown-item" href="https://github.com/Kvieta1990">GitHub Profile</a>
								  <a target="_blank" class="dropdown-item" href="https://mybinder.org/v2/gh/Kvieta1990/Jup_Notes/master">Jupyter Binder</a>
								  <a target="_blank" class="dropdown-item" href="https://github.com/Kvieta1990/Iris">More Notes</a>
								  <a target="_blank" class="dropdown-item" href="https://github.com/Kvieta1990/Kvieta1990.github.io">Blog Repo</a>
								  
            </div>
          </li>
        </ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border" id="others">
      </div>
    </div>
    <div class="avatar-container">
      <div class="avatar-img-border">
					<div class="avatar-adjust" id="safari">
				  </div>
      </div>
    </div>
  

<script>
function myFunction() {
		return '<a href="http://localhost:4001/"><img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/avatar-icon.png" />';
}
let safariAgent = navigator.userAgent.indexOf("Safari") > -1;
let chromeAgent = navigator.userAgent.indexOf("Chrome") > -1;
if (chromeAgent) {
  document.getElementById("others").innerHTML = myFunction();
} else if (safariAgent) {
  document.getElementById("safari").innerHTML = myFunction();
} else {
  document.getElementById("others").innerHTML = myFunction();
}

</script>

</nav>


  <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-10 offset-xl-1 col-lg-12 offset-lg-1">
        <div class="post-heading">
						<h1>Notes on Jupyterhub server setup</h1>
          
            
              <h2 class="post-subheading">Tips & Tricks</h2>
            
          

          
					<span class="post-meta">Posted on November 26, 2022, by Yuanpeng Zhang</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class=" col-xl-10 offset-xl-1 col-lg-12 offset-lg-1 ">

      

      

      <article role="main" class="blog-post">
        <style>
code {
  font-family: Consolas,"courier new";
  color: crimson;
  background-color: #f1f1f1;
  padding: 2px;
  font-size: 105%;
}
</style>

<p style="text-align: justify">
This post is a collection of notes of tips and tricks when trying to set up Jupyterhub server on Ubuntu 20.04 focal, together with the installation of various kernels and extensions.
</p>

<p align="center">
<img src="/assets/img/posts/jupyterhub.png" style="border:none;" alt="jupyterhub" title="jupyterhub" />
</p>

<p style="text-align: justify">
The instructions in Ref. [1] had been followed to set up the Jupyterhub server. The server was set up in a virtual environment located at <code class="language-plaintext highlighter-rouge">/opt/jupyterhub</code> and therefore all the <code class="language-plaintext highlighter-rouge">python</code>, <code class="language-plaintext highlighter-rouge">jupyter</code>, etc. relevant executables belongs to this virtual environment. This means that every time we need to execute one of those executables to install, e.g., a kernel, or a jupyter server relevant executables (e.g., <code class="language-plaintext highlighter-rouge">ipykernel</code>, <code class="language-plaintext highlighter-rouge">jupyter_server</code>, etc.), we need to explicitly refer to this virtual environment where the server resides.

<br />

Here follows is a random collection of issues that I came across when trying to set up the server and running various kernels and capabilities. Sometimes, improper combination of server executables may prevent certain services/capabilities from functioning properly.
</p>

<blockquote>
  <p>N.B. The issues listed here follows are not following a logic order.</p>
</blockquote>

<blockquote>
  <p>Issue-1: <code class="language-plaintext highlighter-rouge">jQuery path not found</code>, or something very similar.</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution: </b>This issue may be due to the version of <code class="language-plaintext highlighter-rouge">jupyterlab_server</code> ‚Äì too new a version may cause this issue, especially when trying to refresh the page. As of writing, it seems the version of <code class="language-plaintext highlighter-rouge">2.10.0</code> of <code class="language-plaintext highlighter-rouge">jupyterlab_server</code> is working properly.

<br />

Here follows is a list of currently properly working versions of packages (which can be obtained via executing <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/bin/jupyter --version</code>),
<br />
‚Äî

<br />
IPython          : 8.6.0
<br />
ipykernel        : 6.17.1
<br />
ipywidgets       : 8.0.2
<br />
jupyter_client   : 7.4.4
<br />
jupyter_core     : 4.11.2
<br />
jupyter_server   : 1.23.1
<br />
jupyterlab       : 3.5.0
<br />
nbclient         : 0.7.0
<br />
nbconvert        : 7.2.4
<br />
nbformat         : 5.7.0
<br />
notebook         : 6.5.2
<br />
qtconsole        : not installed
<br />
traitlets        : 5.5.0
<br />

‚Äî

</p>

<blockquote>
  <p>Issue-2: <code class="language-plaintext highlighter-rouge">plotly</code> figure is not showing up.</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution: </b> This again is something to do with the package version that is being installed. <code class="language-plaintext highlighter-rouge">ipywidgets</code> version 8.0.2 was found not to be working with <code class="language-plaintext highlighter-rouge">plotly</code> interactive plot. The version <code class="language-plaintext highlighter-rouge">7.7.2</code> should be working, which can be installed via [2],

<br />

<code>
sudo /opt/jupyterhub/bin/python3 -m pip install ipywidgets==7.7.2
<code></code>

</code></p>

<blockquote>
  <p>Issue-2: <code class="language-plaintext highlighter-rouge">plotly</code> figure is not showing up.</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution: </b> This again is something to do with the package version that is being installed. <code class="language-plaintext highlighter-rouge">ipywidgets</code> version 8.0.2 was found not to be working with <code class="language-plaintext highlighter-rouge">plotly</code> interactive plot. The version <code class="language-plaintext highlighter-rouge">7.7.2</code> should be working, which can be installed via [2],

<br />

<code>
sudo /opt/jupyterhub/bin/python3 -m pip install ipywidgets==7.7.2
<code></code>

</code></p>

<blockquote>
  <p>Issue-2: Jupyter server fails to build, when executing <code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/jupyter lab build</code></p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution-1: </b> Sometimes it may be due to some problematic extension that was installed. In this case, we want to use either <code class="language-plaintext highlighter-rouge">pip</code> or <code class="language-plaintext highlighter-rouge">conda</code> to uninstall or remove the extension that was causing the problem (refer to the log file of the build that will be printed out on terminal). Meanwhile, we also need to uninstall the extension that was installed via the <code class="language-plaintext highlighter-rouge">jupyter labextension</code> command (if it has ever been installed in this way). Also, it seems that the un-installation of the extension should be after the un-installation of the module with <code class="language-plaintext highlighter-rouge">pip</code> or <code class="language-plaintext highlighter-rouge">conda</code>. In the case of the <code class="language-plaintext highlighter-rouge">ipysheet</code> extension, here follows may be the step to follow for the un-installation,

<br />
<br />

1. <code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/python3 -m pip uninstall ipysheet</code>
<br />
or
<br />
<code class="language-plaintext highlighter-rouge">sudo /opt/conda/bin/conda remove -p /opt/conda/envs/python ipysheet</code>
<br />
<br />
2. <code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/jupyter labextension uninstall ipysheet</code>
<br />
<br />
<b>Solution-2: </b> Sometimes it could be due to low memory issue, i.e., the system resource is not enough for building the jupyterlab server. In such a situation, following the prompt on the command line usually does not help. Specifically for Google cloud service, the advantage is that we can freely change the size of our instance allocation. So we can increase the size temporarily and build the jupyterlab server. After that, we can then change the size back to the smaller value as before just to save money ‚Äì we will be billed based on the actual use of resource, which is very nice! Alternatively, the following command could also be used to build jupyter server to get around with the memory issue, sometimes,
<br />
<code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/jupyter lab build --dev-build=False --minimize=False</code>
</p>

<blockquote>
  <p>Issue-3: Installation of <code class="language-plaintext highlighter-rouge">xeus-cling</code> kernel for C++</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> For installing <code class="language-plaintext highlighter-rouge">xeus-cling</code> kernel for C++, we need to use <code class="language-plaintext highlighter-rouge">mamba</code>, following the steps below,
<br />
1. Follow the instruction in Ref. [3] to install <code class="language-plaintext highlighter-rouge">mamba</code> - we need to use the manual way of installation, i.e. using the <code class="language-plaintext highlighter-rouge">curl</code> command. Then we want to copy the <code class="language-plaintext highlighter-rouge">micromamba</code> binary to a central location, e.g., <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/bin</code>.
<br />
<b>N. B. </b> This is the directory that has been used for hosting the central jupyterhub server and I just put <code class="language-plaintext highlighter-rouge">mamba</code> executable there as well just to stay self-consistent. <code class="language-plaintext highlighter-rouge">This may not be necessary.</code>
<br />
2. <code class="language-plaintext highlighter-rouge">mamba shell init --shell=bash --prefix=~/.micromamba</code>
<br />
<b>N. B. </b> This guarantees that all envs and <code class="language-plaintext highlighter-rouge">mamba</code> stuff will be installed to the specified prefix directory.
<br />
3. <code class="language-plaintext highlighter-rouge">source .bashrc</code>
<br />
<b>N. B. </b> This is to make sure that the above added mamba initialization in our bash configuration file is taking effect.
<br />
4. Create the <code class="language-plaintext highlighter-rouge">cling</code> env, via <code class="language-plaintext highlighter-rouge">mamba create -n cling</code>.
<b>N. B. </b> To remove an env, we need <code class="language-plaintext highlighter-rouge">mamba env remove -n cling</code>.
<br />
5. <code class="language-plaintext highlighter-rouge">mamba install xeus-cling -c conda-forge --prefix=~/.micromamba</code>
<br />
6. The command above will create jupyter kernel under <code class="language-plaintext highlighter-rouge">$PREFIX/share/jupyter/kernels</code>, or on some machines, the kernels may be found in some other places, like <code class="language-plaintext highlighter-rouge">$PREFIX//cling/share/jupyter/kernels</code>. To let our jupyterhub server see our kernels, we need to manually copy the available kernels to the proper directory (where jupyterhub can find). In my case, the target directory is <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/share/jupyter/kernels/</code>.
</p>

<blockquote>
  <p>Issue-4: List of kernels is not complete</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> Sometimes when listing out all kernels using <code class="language-plaintext highlighter-rouge">jupyter kernelspec list</code>, it
could happen that not all kernels are listed out. That could be because we were using the wrong <code class="language-plaintext highlighter-rouge">jupyter</code>. For example, if there a version of <code class="language-plaintext highlighter-rouge">jupyter</code> installed at <code class="language-plaintext highlighter-rouge">/usr/bin/jupyter</code>, it will always win over other <code class="language-plaintext highlighter-rouge">jupyter</code> versions. If it happens that we follow certain instructions to install the <code class="language-plaintext highlighter-rouge">jupyterhub</code> server into other places (e.g., Ref. [1]), then we will not see all kernels available on our machine by <code class="language-plaintext highlighter-rouge">jupyter ernelspec list</code>. In such a situation, we have to explicitly give the full path to the <code class="language-plaintext highlighter-rouge">jupyter</code> installed in a certain location (where we installed the <code class="language-plaintext highlighter-rouge">jupyterhub</code> server). In my case, the full path is <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/bin/jupyter</code>.
</p>

<blockquote>
  <p>Issue-5: Installation of Juka kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> To install the <code class="language-plaintext highlighter-rouge">juka</code> kernel, for sure, initially, we need to install <code class="language-plaintext highlighter-rouge">Juka</code> - see Ref. [4]. Then execute <code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/pip install juka-kernel</code>, followed by <code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/python -m juka-kernel.install</code>. Finally, we need to go to the <code class="language-plaintext highlighter-rouge">juka_kernel</code> installation location (e.g. <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/lib/python3.8/site-packages/juka/</code>) and execute, <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/bin/python install.py --user</code>.
</p>

<blockquote>
  <p>Issue-6: Installation of SSH kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> When installing the SSH kernel following the instruction in Ref. [5], by default, the kernel is installed into <code class="language-plaintext highlighter-rouge">/root/.local/share/jupyter/kernels/ssh</code>. It seems that Jupyter has difficulty in finding the installed kernel in the location above. So, we may need to manually copy the whole directory above to our local area, such as <code class="language-plaintext highlighter-rouge">~/.local/share/jupyter/kernels/ssh</code>. A restart of the
server is needed to be able to see the copied kernel.
</p>

<blockquote>
  <p>Issue-7: Installation of C kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b> Solution:</b> When installing the C kernel following Ref. [6], the execution of the kernel installation command may require <code class="language-plaintext highlighter-rouge">sudo</code> privilege,
in which case the kernel will be installed to the root directory (i.e. <code class="language-plaintext highlighter-rouge">/root/.local/share/jupyter/kernels/c</code>). In that case, we then need to    manually copy the directory <code class="language-plaintext highlighter-rouge">c</code> to our local area, i.e., <code class="language-plaintext highlighter-rouge">$HOME/.local/share/jupyter/kernels/c</code>.
</p>

<blockquote>
  <p>Issue-8: Installation of Fortran kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution-1:</b> For installing the <code class="language-plaintext highlighter-rouge">Coarray Fotran</code> kernel, we can following Ref. [7]. One of the prerequisite package for installing this kernel is <code class="language-plaintext highlighter-rouge">opencoarrays</code>. For the installation of this package, if we are on Ubuntu higher than 18.04, we may need to follow the instruction in Ref. [8] to install it manually.
<br />
<b> Solution-2:</b> If the <code class="language-plaintext highlighter-rouge">Coarrays Fortran</code> kernel fails to execute any commands (complaining about libraries issues),
try to execute the followings commands,
<br />
‚Äî
<br />
sudo cp /usr/lib/x86_64-linux-gnu/op
<br />en-coarrays/mpich/lib/* /usr/lib/x86_64-linux-gnu/
<br />
sudo cp /usr/lib/x86_64-linux-gnu/open-coarrays/openmpi/lib/* /usr/lib/x86_64-linux-gnu/
<br />
cd /usr/lib/x86_64-linux-gnu/
<br />
sudo ln -s libmpi_usempif08.so.40 libmpi_usempif08.so
<br />
sudo ln -s libmpi_usempi_ignore_tkr.so.40 libmpi_usempi_ignore_tkr.so
<br />
sudo ln -s libmpi_mpifh.so.40 libmpi_mpifh.so
<br />
sudo ln -s libmpi_mpifh.so.40 libmpi_mpifh.so
<br />
sudo ln -s libmpi.so.40 libmpi.so
<br />
sudo ln -s libopen-rte.so.40 libopen-rte.so
<br />
sudo ln -s libopen-pal.so.40 libopen-pal.so
<br />
sudo ln -s libevent-2.1.so.7 libevent.so
<br />
sudo ln -s libevent_pthreads-2.1.so.7 libevent_pthreads.so
<br />
sudo ln -s libhwloc.so.15 libhwloc.so
<br />
sudo mkdir -p  /usr/include/OpenCoarrays-2.0.0-rc1_GNU-7.3.0
<br />
sudo mkdir -p /usr/lib/x86_64-linux-gnu/openmpi/includ
<br />
‚Äî
</p>

<blockquote>
  <p>Issue-10: conda environment as jupyter kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> When following Ref. [1] to install the jupyterhub server, a conda environment was set up to become a kernel environment. In the future if we want to install packages to that environment to make certain modules available in that kernel, we need to use the conda <code class="language-plaintext highlighter-rouge">--prefix</code> flag to specify the full path to the conda environment where we are going to install certain modules.
</p>

<blockquote>
  <p>Issue-11: Installation of Lua kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> The <code class="language-plaintext highlighter-rouge">Lua</code> kernel can be easily installed following Ref. [9], in which the <code class="language-plaintext highlighter-rouge">iLua</code> kernel will be installed. Also, one needs to install <code class="language-plaintext highlighter-rouge">lua</code> separately to make the <code class="language-plaintext highlighter-rouge">lua</code> command system-wide available.
</p>

<blockquote>
  <p>Issue-12: Installation of <code class="language-plaintext highlighter-rouge">diffpy-cmi</code> &amp; <code class="language-plaintext highlighter-rouge">mpdf</code> kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b> Solution:</b> To install <code class="language-plaintext highlighter-rouge">diffpy</code>, <code class="language-plaintext highlighter-rouge">diffpy-CMI</code> and <code class="language-plaintext highlighter-rouge">mpdf</code> packages into a single conda environment and make it available in a dedicated kernel, follow the steps below,
<br />
‚Äî
<br />
$ sudo /opt/conda/bin/conda create ‚Äìprefix /opt/conda/envs/diffpy python=3.7 ipykernel
<br />
$ sudo /opt/conda/envs/diffpy/bin/python -m ipykernel install ‚Äìprefix=/opt/jupyterhub/ ‚Äìname ‚Äòdiffpy‚Äô ‚Äìdisplay-name ‚ÄúPython (diffpy)‚Äù
<br />
$ sudo /opt/conda/bin/conda install -p /opt/conda/envs/diffpy -c diffpy diffpy-cmi
<br />
$ git clone https://github.com/FrandsenGroup/diffpy.mpdf.git
<br />
$ mv diffpy.mpdf ~/.diffpy.mpdf &amp;&amp; cd ~/.diffpy.mpdf
<br />
$ sudo /opt/conda/envs/diffpy/bin/python setup.py install
<br />
‚Äî
</p>

<blockquote>
  <p>Issue-13: Installation of <code class="language-plaintext highlighter-rouge">sagemath</code> kernel</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> To install the <code class="language-plaintext highlighter-rouge">sagemath</code> kernel, we need to follow the instructions below,
<br />
‚Äî
<br />
Step-1: Ref. [10]
<br />
Step-2: Ref. [11]
<br />
‚Äî
</p>

<blockquote>
  <p>Issue-14: Installation of the jupyter language server</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> Follow the instruction in Ref. [12] for installation and refer to Ref. [13] for configuration of the service.
</p>

<blockquote>
  <p>Issue-15: Code formt</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b> Solution:</b> Jupyterlab code format needs <code class="language-plaintext highlighter-rouge">black</code> to be installed. Refer to Ref. [14] for more details.
</p>

<blockquote>
  <p>Issue-16: Execution of commands in cell within Jupyter server take forever</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> Sometimes a kernel may be launched successfully, but when trying to execute some commands within jupyterlab, it might fail. In this case, we can take a look at the kernel specification file (the JSON file) and see whether it is a problem with the improper command being executed when launching the kernel. Here follows is an example with the <code class="language-plaintext highlighter-rouge">scilab</code> kernel.
<br />
1. First, we can list out all the available kernels and get an idea about where the corresponding kernel file is located,
<br />
$ <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/bin/jupyter kernelspec list</code>
<br />
<b>N. B. </b> In the case of <code class="language-plaintext highlighter-rouge">scilab</code>, the kernel file is here,
<br />
<code class="language-plaintext highlighter-rouge">/opt/jupyterhub/share/jupyter/kernels/scilab</code>
<br />
2. Then cd into the kernel directory identified above and edit the <code class="language-plaintext highlighter-rouge">kernel.json</code> file. In the case of <code class="language-plaintext highlighter-rouge">scilab</code>, the default kernel file reads,
</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">   </span><span class="p">{</span><span class="w">
       </span><span class="nl">"argv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"python"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"-m"</span><span class="p">,</span><span class="w"> </span><span class="s2">"scilab_kernel"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"-f"</span><span class="p">,</span><span class="w"> </span><span class="s2">"{connection_file}"</span><span class="p">],</span><span class="w">
       </span><span class="nl">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Scilab"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scilab"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"mimetype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/x-octave"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scilab"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p style="text-align: justify; margin-left: 50px">
3. Then we know that the actual command being executed at each time of the kernel launching is the system-wise version of <code class="language-plaintext highlighter-rouge">python</code>. In my case, this will fail, since we need the version of <code class="language-plaintext highlighter-rouge">python</code> corresponding to our Jupyterhub server, which is located at <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/bin/python</code>. So, we need to change the <code class="language-plaintext highlighter-rouge">kernel.json</code> file to be like this,
</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">   </span><span class="p">{</span><span class="w">
       </span><span class="nl">"argv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/opt/jupyterhub/bin/python"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"-m"</span><span class="p">,</span><span class="w"> </span><span class="s2">"scilab_kernel"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"-f"</span><span class="p">,</span><span class="w"> </span><span class="s2">"{connection_file}"</span><span class="p">],</span><span class="w">
       </span><span class="nl">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Scilab"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scilab"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"mimetype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/x-octave"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scilab"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Issue-17: <code class="language-plaintext highlighter-rouge">scilab</code> kernel log file</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> By default, running the <code class="language-plaintext highlighter-rouge">scilab</code> kernel will create a <code class="language-plaintext highlighter-rouge">test.log</code> file under home directory. To avoid this behavior, we can edit the corresponding <code class="language-plaintext highlighter-rouge">kernel.py</code> file and comment out relevant lines ‚Äì line 97-98 in <code class="language-plaintext highlighter-rouge">/opt/jupyterhub/lib/python3.8/site-packages/scilab_kernel/kernel.py</code>, i.e., the following two lines,
</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">'~/test.log'</span><span class="p">),</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fid</span><span class="p">:</span>
      <span class="n">fid</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">'executable: '</span> <span class="o">+</span> <span class="n">executable</span><span class="p">)</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Issue-18: <code class="language-plaintext highlighter-rouge">wolfram</code> kernel documentation file location</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> By default, the installed wolfram player kernel will use the home directory as the user documentation directory (which can be printed out within either jupyterlab cell execution or from within <code class="language-plaintext highlighter-rouge">wolframscript</code> CLI, by executing <code class="language-plaintext highlighter-rouge">$UserDocumentsDirectory</code>). This will create a <code class="language-plaintext highlighter-rouge">Wolfram Player</code> folder at each time when launching the kernel. To move this directory to another location, we need [15],
<br />
1. <code class="language-plaintext highlighter-rouge">xdg-user-dirs-update --set DOCUMENTS /home/cloud/.wolfram_doc</code> (from command line)
<br />
<b>N. B.</b> The directory specified at the end of the command can be anywhere we would like it to be.
<br />
2. Rebuild jupyterhub, by running <code class="language-plaintext highlighter-rouge">sudo /opt/jupyterhub/bin/jupyter lab build</code>.
<br />
3. Restart jupyterhub service, by running <code class="language-plaintext highlighter-rouge">sudo systemctl restart jupyterhub</code>
</p>

<blockquote>
  <p>Issue-19: <code class="language-plaintext highlighter-rouge">go</code> kernel creates a <code class="language-plaintext highlighter-rouge">go</code> folder under home directory</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> By default, the <code class="language-plaintext highlighter-rouge">go</code> kernel will use the <code class="language-plaintext highlighter-rouge">go</code> directory under home directory as the main working directory and therefore <code class="language-plaintext highlighter-rouge">$HOME/go</code> directory has to be there. To move the <code class="language-plaintext highlighter-rouge">go</code> directory to another location (e.g., <code class="language-plaintext highlighter-rouge">$HOME/.go</code>), we may want to put the following line in our <code class="language-plaintext highlighter-rouge">.bashrc</code> and <code class="language-plaintext highlighter-rouge">.bash_profile</code> file, <code class="language-plaintext highlighter-rouge">export GOPATH=$HOME/.go</code> and edit the <code class="language-plaintext highlighter-rouge">go</code> kernel JSON file to,
</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">   </span><span class="p">{</span><span class="w">
       </span><span class="nl">"argv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
           </span><span class="s2">"/home/cloud/.go/bin/gophernotes"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"{connection_file}"</span><span class="w">
       </span><span class="p">],</span><span class="w">
       </span><span class="nl">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Go"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"go"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"go"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p style="text-align: left; margin-left: 50px">
<b>N. B.</b> The location of <code class="language-plaintext highlighter-rouge">kernel.json</code> to be edited is, <code class="language-plaintext highlighter-rouge">/home/cloud/.local/share/jupyter/kernels/gophernotes/kernel.json</code>.
</p>

<blockquote>
  <p>Issue-20: <code class="language-plaintext highlighter-rouge">R</code> kernel creates an <code class="language-plaintext highlighter-rouge">R</code> folder under home directory</p>
</blockquote>

<p style="text-align: justify; margin-left: 50px">
<b>Solution:</b> When following the instructions in Ref. [16] to install the <code class="language-plaintext highlighter-rouge">IRkernel</code> for R, the installed relevant R packages will be put under <code class="language-plaintext highlighter-rouge">$HOME/R</code> directory. Those installed packages can actually be moved to the default package installation location of <code class="language-plaintext highlighter-rouge">R</code>, e.g., <code class="language-plaintext highlighter-rouge">/usr/lib/R/library</code> so that the <code class="language-plaintext highlighter-rouge">R</code> folder under home directory can be removed. To do that, we can execute, <code class="language-plaintext highlighter-rouge">sudo cp -av $HOME/R/x86_64-pc-linux-gnu-library/3.6/* /usr/lib/R/library/</code>.
</p>

<p><br /></p>

<p><b>References</b></p>

<p>[1] <a href="https://jupyterhub.readthedocs.io/en/1.2.1/installation-guide-hard.html">https://jupyterhub.readthedocs.io/en/1.2.1/installation-guide-hard.html</a></p>

<p>[2] <a href="https://github.com/jupyterlab/jupyterlab/issues/12977">https://github.com/jupyterlab/jupyterlab/issues/12977</a></p>

<p>[3] <a href="https://mamba.readthedocs.io/en/latest/installation.html#linux-and-macos">https://mamba.readthedocs.io/en/latest/installation.html#linux-and-macos</a></p>

<p>[4] <a href="https://jukalang.com/download">https://jukalang.com/download</a></p>

<p>[5] <a href="https://github.com/NII-cloud-operation/sshkernel">https://github.com/NII-cloud-operation/sshkernel</a></p>

<p>[6] <a href="https://github.com/brendan-rius/jupyter-c-kernel">https://github.com/brendan-rius/jupyter-c-kernel</a></p>

<p>[7] <a href="https://github.com/sourceryinstitute/jupyter-CAF-kernel">https://github.com/sourceryinstitute/jupyter-CAF-kernel</a></p>

<p>[8] <a href="https://askubuntu.com/questions/1277932/cannot-install-open-coarrays-bin-for-gfortran-on-ubuntu-20-04">https://askubuntu.com/questions/1277932/cannot-install-open-coarrays-bin-for-gfortran-on-ubuntu-20-04</a></p>

<p>[9] <a href="https://github.com/guysv/ilua">https://github.com/guysv/ilua</a></p>

<p>[10] <a href="https://sagemanifolds.obspm.fr/install_ubuntu.html">https://sagemanifolds.obspm.fr/install_ubuntu.html</a></p>

<p>[11] <a href="https://doc.sagemath.org/html/en/installation/launching.html#setting-up-sagemath-as-a-jupyter-kernel-in-an-existing-jupyter-notebook-or-jupyterlab-installation">https://doc.sagemath.org/html/en/installation/launching.html#setting-up-sagemath-as-a-jupyter-kernel-in-an-existing-jupyter-notebook-or-jupyterlab-installation</a></p>

<p>[12] <a href="https://jupyterlab-lsp.readthedocs.io/en/latest/Installation.html#please-read-this-first">https://jupyterlab-lsp.readthedocs.io/en/latest/Installation.html#please-read-this-first</a></p>

<p>[13] <a href="https://github.com/jupyter-lsp/jupyterlab-lsp#other-configuration-methods">https://github.com/jupyter-lsp/jupyterlab-lsp#other-configuration-methods</a></p>

<p>[14] <a href="https://black.readthedocs.io/en/stable/getting_started.html">https://black.readthedocs.io/en/stable/getting_started.html</a></p>

<p>[15] <a href="https://mathematica.stackexchange.com/questions/89369/prevent-10-2-from-creating-wolfram-mathematica-directory-on-linux">https://mathematica.stackexchange.com/questions/89369/prevent-10-2-from-creating-wolfram-mathematica-directory-on-linux</a></p>

<p>[16] <a href="https://irkernel.github.io/installation/">https://irkernel.github.io/installation/</a></p>

      </article>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#jupyter">jupyter</a>
          
            <a href="/tags#web development">web development</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a target="_blank" href="https://twitter.com/intent/tweet?text=Notes+on+Jupyterhub+server+setup&url=http%3A%2F%2Flocalhost%3A4001%2F2022-11-26-notes_jupyterhub%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4001%2F2022-11-26-notes_jupyterhub%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4001%2F2022-11-26-notes_jupyterhub%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2022-10-30-twin_paradox/" data-toggle="tooltip" data-placement="top" title="Notes on twin paradox">&larr; Previous Post</a>
        </li>
        
        
      </ul>
      
  <div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_shortname = &quot;rmcprofile&quot;;
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://rmcprofile.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row column_top">
        <div class="col-xl-10 offset-xl-1 col-lg-10 offset-lg-1">
        <h3>External Links</h3>
        </div>
    </div>
    <div class="row" style="margin-bottom:10px">
        <div class="col-xl-10 offset-xl-1 col-lg-10 offset-lg-1">
      <div class="column" style="background-color:#EAEAEA;">
        <h4>Monte Carlo</h4>
				<a target="_blank" href="https://tproffen.github.io/DiffuseCode/">DISCUS</a>
				</br>
				<a target="_blank" href="https://www.szfki.hu/~nphys/rmc++/opening.html">RMC++</a>
				</br>
				<a target="_blank" href="https://research.csiro.au/mmm/hrmc/">HRMC</a>
				</br>
				<a target="_blank" href="https://bachiraoun.github.io/fullrmc/">fullrmc</a>
				</br>
        <a target="_blank" href="http://www.dragon.lv/exafs/rmc.htm">RMC for EXAFS</a>
        </br>
        <a target="_blank" href="https://www.isis.stfc.ac.uk/Pages/Empirical-Potential-Structure-Refinement.aspx">EPSR</a>
				</br>
				<a target="_blank" href="http://wwwisis2.isis.rl.ac.uk/rmc/">RMC at ISIS facility</a>
				</br>
				<a target="_blank" href="https://rmcprofile.pages.ornl.gov/">RMCProfile website</a>
				</br>
				<a target="_blank" href="http://www.rmcprofile.org/Main_Page">RMCProfile website - legacy</a>
				</br>
				<a target="_blank" href="https://en.wikipedia.org/wiki/Reverse_Monte_Carlo">Wikipedia for RMC</a>
      </div>
      <div class="column" style="background-color:#EAEAEA;">
        <h4>Rietveld-like</h4>
        <a target="_blank" href="https://www.diffpy.org/products/pdfgui.html">PDFgui</a>
        </br>
        <a target="_blank" href="https://www.diffpy.org/products/diffpycmi/index.html">DIFFPy-CMI</a>
        </br>
        <a target="_blank" href="https://www.diffpy.org/products/mPDF.html">magnetic PDF</a>
        </br>
        <a target="_blank" href="https://community.dur.ac.uk/john.evans/topas_workshop/tutorial_pdf_sno2.htm">Topas for PDF</a>
      </div>
      <div class="column" style="background-color:#EAEAEA;">
        <h4>Tools</h4>
        <a target="_blank" href="http://addie.ornl.gov/">ADDIE (ORNL internal)</a>
        </br>
				<a target="_blank"
						href="http://li.mit.edu/Archive/Graphics/A/">Atomeye</a>
				</br>
				<a target="_blank"
						href="https://sourceforge.net/projects/xming/">Xming</a>
				</br>
				<a target="_blank"
						href="https://www.mantidproject.org/Main_Page">Mantid</a>
				</br>
				<a target="_blank" href="https://www.facebook.com/disord.matt">GUDRUN</a>
				</br>
				<a target="_blank"
						href="https://www.diffpy.org/products/pdfgetx.html">PDFGet..
						</a>
				</br>
				<a target="_blank" href="https://www.ncnr.nist.gov/resources/n-lengths/">Neutron scattering length</a>
				</br>
				<a target="_blank" href="http://wwwisis2.isis.rl.ac.uk/reference/Xray_scatfac.htm">X-ray form factor</a>
				</br>
				<a target="_blank" href="https://www.webelements.com/">Web elements</a>
				</br>
				<a target="_blank" href="https://ptable.com/#Properties">Dynamic
						periodic table</a>
				</br>
				<a target="_blank" href="http://wwwisis2.isis.rl.ac.uk/disordered/Manuals/ATLAS/atlas_values.htm">ISIS values</a>
				</br>
      </div>
      <div class="column" style="background-color:#EAEAEA;">
        <h4>Facilities</h4>
				<a target="_blank" href="https://neutrons.ornl.gov/nomad">US - ORNL - NOMAD</a>
        </br>
				<a target="_blank" href="https://neutrons.ornl.gov/powgen">US - ORNL -
						POWGEN</a>
				</br>
				<a target="_blank" href="https://www.aps.anl.gov/Beamlines/Directory/Details?beamline_id=16">US - APS - 11-ID-B</a>
				</br>
				<a target="_blank" href="https://www.bnl.gov/ps/beamlines/beamline.php?r=28-ID-1">US - BNL - 28-ID-1</a>
				</br>
				<a target="_blank"
						href="https://www.isis.stfc.ac.uk/Pages/Gem.aspx">UK - ISIS - GEM</a>
				</br>
				<a target="_blank" href="https://www.isis.stfc.ac.uk/Pages/polaris.aspx">UK - ISIS - Polaris</a>
				</br>
				<a target="_blank" href="https://www.diamond.ac.uk/Instruments/Crystallography/I15-1.html">UK - Diamond - I15-1</a>
				</br>
				<a target="_blank" href=""https://mlfinfo.jp/en/bl21/>Japan - J-PARC - NOVA</a>
				</br>
				<a target="_blank" href="http://www.spring8.or.jp/wkg/BL14B1/instrument/lang-en/INS-0000000309/instrument_summary_view">Japan - SPRING8 - BL14B1</a>
				</br>
				<a target="_blank" href="http://www.spring8.or.jp/wkg/BL22XU/instrument/lang-en/INS-0000000327/instrument_summary_view">Japan - SPRING8 - BL22XU</a>
				</br>
				<a target="_blank" href="https://europeanspallationsource.se/instruments/heimdal">Europe - ESS - HEIMDAL</a>
				</br>
				<a target="_blank" href="http://e-ssrf.sinap.cas.cn/beamlines/bl13w1/201401/t20140112_152430.html">China - SSRF - BL13W1</a>
      </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 footer_bottom">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a target="_blank" href="/feed.xml" title="RSS">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">RSS</span>
    </a>
  </li><li class="list-inline-item">
    <a target="_blank" href="mailto:zhangy3@ornl.gov" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a target="_blank" href="https://github.com/kvieta1990" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">

      
      </p>
      <p class="theme-by text-muted">
        Copyright 2020 ¬©
        <a>Yuanpeng Zhang</a>
      </p>
      </div>
    </div>
	<div class="row" id="vistor_map" style="position:absolute; left:-10px; bottom:20px;">
	  <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=000000&w=300&t=tt&d=mXrA2cjTFPms32CLvpbXJeN7mGr8Pp6J7WRX3Im-ZOw&co=eaeaea&ct=000000'></script>
	</div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
